/*
  chat Timeline Stylesheet
  This CSS is designed to be resilient and adapt to chat's light/dark themes.
*/

/* Use CSS variables for easy theme management. We sample chat's own colors. */
:root {
    --timeline-dot-color: #D1D5DB; /* Light mode gray */
    --timeline-dot-active-color: #6128FF; /* ç´«è‰² rgb(97, 40, 255) */
    --timeline-star-color: #FF7D03; /* æ”¶è—æ©™è‰² rgb(255, 125, 3) */

    /* AI Studio-like tooltip tokens (light) */
    --timeline-tooltip-bg: #0d0d0d;
    --timeline-tooltip-text: #FFFFFF;
    --timeline-tooltip-border: #0d0d0d;
    --timeline-tooltip-radius: 12px;
    --timeline-tooltip-shadow: 0 4px 14px rgba(0,0,0,0.10), 0 1px 2px rgba(0,0,0,0.06);
    /* geometry */
    --timeline-tooltip-lh: 18px;
    --timeline-tooltip-pad-y: 10px;
    --timeline-tooltip-pad-x: 12px;
    --timeline-tooltip-border-w: 1px;
    --timeline-tooltip-arrow-size: 12px; /* âœ… éœ€æ±‚1ï¼šç®­å¤´æ”¾å¤§ 1.5 å€ (8px â†’ 12px) */
    --timeline-tooltip-arrow-outside: 6px; /* âœ… éœ€æ±‚1ï¼šåŒæ­¥è°ƒæ•´çªå‡ºè·ç¦» (4px â†’ 6px) */
    --timeline-tooltip-anim-in: 120ms cubic-bezier(0, 0, 0.2, 1);
    --timeline-tooltip-anim-out: 100ms linear;

    --timeline-bar-bg: rgba(246, 246, 248, 0.8);
    --timeline-dot-size: 14px;
    --timeline-star-size: 17px; /* äº”è§’æ˜Ÿç›’å­å°ºå¯¸ï¼ˆå¢åŠ 1pxï¼‰ */
    --timeline-active-ring: 3px;
    --timeline-star-ring: 5px; /* äº”è§’æ˜Ÿè¾¹æ¡†ç¯å®½åº¦ï¼ˆå¢åŠ 1pxï¼Œä½¿è¾¹æ¡†æ›´æ˜æ˜¾ï¼‰ */
    --timeline-track-padding: 16px;
    --timeline-tooltip-max: 288px;
    --timeline-min-gap: 20px;
    /* enlarged hit area for easier clicking */
    --timeline-hit-size: 30px;
    /* spacing model */
    --timeline-tooltip-gap-visual: 4px;   /* âœ… éœ€æ±‚1ï¼šå‡å°‘é—´è·ï¼Œè®© tooltip é è¿‘åœ†ç‚¹ (8px â†’ 4px) */
    --timeline-tooltip-gap-box: 2px;      /* âœ… éœ€æ±‚1ï¼šåŒæ­¥å‡å°‘ box gap (4px â†’ 2px) */
    /* âœ… ç§»é™¤ï¼š--timeline-hold-ms å·²åˆ é™¤ï¼Œé•¿æŒ‰åŠŸèƒ½å·²ç§»é™¤ */
}

/* Override variables when chat's dark mode is active */
html.dark {
    --timeline-dot-color: #A0A0A0; /* âœ…âœ… è¿›ä¸€æ­¥æå‡äº®åº¦ï¼š#888 â†’ #A0A0A0ï¼Œæ·±è‰²ä¸»é¢˜ä¸‹æ›´æ¸…æ™° */
    --timeline-dot-active-color: #8B5CF6; /* âœ…âœ… æ›´æ˜äº®çš„ç´«è‰²ï¼š#7C3AED â†’ #8B5CF6 (violet-500)ï¼Œå¯¹æ¯”åº¦æ›´å¼º */
    --timeline-star-color: #FB923C; /* æ©™è‰²ä¿æŒä¸å˜ï¼Œå·²ç»å¾ˆå¥½ */
    --timeline-active-ring: 4px; /* âœ…âœ… åŠ ç²—æ¿€æ´»ç¯ï¼š3px â†’ 4pxï¼Œæ·±è‰²ä¸»é¢˜ä¸‹æ›´é†’ç›® */
    /* Dark tooltip palette */
    --timeline-tooltip-bg: #262626; /* âœ…âœ… å†æäº®ä¸€ç‚¹ï¼š#1f1f1f â†’ #262626 */
    --timeline-tooltip-text: #F5F5F5;
    --timeline-tooltip-border: #404040; /* âœ…âœ… æ›´æ˜æ˜¾çš„è¾¹æ¡†ï¼š#2a2a2a â†’ #404040 */
    --timeline-bar-bg: rgba(45, 45, 48, 0.95); /* âœ…âœ… æ›´é«˜ä¸é€æ˜åº¦ï¼š0.92 â†’ 0.95ï¼ŒèƒŒæ™¯æ›´æ‰å® */
}

.chat-timeline-bar {
    position: fixed;
    /* Position values (top, right, height) are set by JavaScript based on site adapter */
    top: 60px; /* Default fallback */
    right: 17px; /* Default fallback */
    width: 28px;
    height: calc(100vh - 100px); /* Default fallback */
    z-index: 30; /* ensure above site chrome */
    display: flex;
    flex-direction: column;
    align-items: center;
    border-radius: 12px;
    background-color: var(--timeline-bar-bg);
    backdrop-filter: blur(8px); /* âœ… å¢å¼ºæ¨¡ç³Šæ•ˆæœï¼š4px â†’ 8pxï¼Œæ·±è‰²ä¸»é¢˜ä¸‹æ›´æœ‰è´¨æ„Ÿ */
    -webkit-backdrop-filter: blur(8px);
    transition: background-color 0.3s ease;
    overflow: visible;
    /* âœ… ä¿®æ”¹ï¼šç§»é™¤ paint containmentï¼Œå…è®¸å›¾é’‰æ˜¾ç¤ºåœ¨æ—¶é—´è½´å¤– */
    contain: layout;
}

/* âœ… æ·±è‰²ä¸»é¢˜ä¸‹æ·»åŠ å¾®å¦™è¾¹æ¡†å’Œå…‰æ™•ï¼Œå¢å¼ºæ—¶é—´è½´çš„ç«‹ä½“æ„Ÿ */
html.dark .chat-timeline-bar {
    box-shadow: 0 2px 16px rgba(0, 0, 0, 0.4), 
                0 0 1px rgba(255, 255, 255, 0.1),
                inset 0 0 0 1px rgba(255, 255, 255, 0.1);
}

/* Scrollable track to host all dots (long canvas) */
.timeline-track {
    position: relative;
    width: 100%;
    height: 100%;
    overflow: visible; /* âœ… æ”¹ä¸º visibleï¼Œå…è®¸å›¾é’‰æ˜¾ç¤ºåœ¨å¤–éƒ¨ */
}

/* Inner content whose height reflects conversation length */
.timeline-track-content {
    position: relative;
    width: 100%;
    height: 100%; /* updated by JS when needed */
}

.timeline-dot {
    position: absolute;
    left: 50%;
    /* Use normalized position `--n` mapped to track with padding */
    top: calc(
      var(--timeline-track-padding)
      + (100% - 2 * var(--timeline-track-padding)) * var(--n, 0)
    );
    transform: translate(-50%, -50%);
    width: var(--timeline-hit-size);   /* enlarged hit area */
    height: var(--timeline-hit-size);  /* enlarged hit area */
    background: transparent;           /* visible dot drawn via ::after */
    border: none;
    cursor: pointer;
    padding: 0;
}

.timeline-dot::after {
    content: '';
    position: absolute;
    left: 50%;
    top: 50%;
    width: var(--timeline-dot-size);
    height: var(--timeline-dot-size);
    transform: translate(-50%, -50%);
    border-radius: 50%;
    background-color: var(--timeline-dot-color);
    transition: transform 0.15s ease, box-shadow 0.15s ease, background-color 0.15s ease;
}

/* Enhance visibility and interaction feedback on hover */
.timeline-dot:hover::after { 
    transform: translate(-50%, -50%) scale(1.15);
}
/* ä»…æœªé€‰ä¸­ä¸”æœªè¢«æ”¶è—çš„èŠ‚ç‚¹ hover æ—¶é¢œè‰²å˜æ·± */
.timeline-dot:not(.active):not(.starred):hover::after {
    background-color: #999999; /* æ˜äº®æ¨¡å¼ï¼šæ·±ç°è‰² */
}
html.dark .timeline-dot:not(.active):not(.starred):hover::after {
    background-color: #C0C0C0; /* âœ…âœ… æš—é»‘æ¨¡å¼ï¼šæ›´äº®çš„ç°è‰² #A3A3A3 â†’ #C0C0C0ï¼Œhoveræ—¶éå¸¸æ˜æ˜¾ */
}
/* Keyboard accessibility: visible focus ring */
.timeline-dot:focus-visible::after {
    box-shadow: 0 0 6px var(--timeline-dot-active-color);
}
/* Style for the currently active dot */
.timeline-dot.active::after {
    box-shadow: 0 0 0 var(--timeline-active-ring) var(--timeline-dot-active-color), 
                0 0 8px var(--timeline-dot-active-color);
}

/* âœ…âœ… æ·±è‰²ä¸»é¢˜ä¸‹æ¿€æ´»èŠ‚ç‚¹åŠ å¼ºå…‰æ™•æ•ˆæœ */
html.dark .timeline-dot.active::after {
    box-shadow: 0 0 0 var(--timeline-active-ring) var(--timeline-dot-active-color), 
                0 0 12px var(--timeline-dot-active-color),
                0 0 20px rgba(139, 92, 246, 0.3);
}

/* âœ… å·²æ”¶è—çš„æ ‡è®°ç‚¹ï¼šæ©™è‰²äº”è§’æ˜Ÿï¼ˆä½¿ç”¨ clip-path è£å‰ªï¼‰*/
.timeline-dot.starred::after {
    background-color: var(--timeline-star-color);
    border-radius: 0; /* ç§»é™¤åœ†å½¢ */
    /* æ”¾å¤§ç›’å­å°ºå¯¸ï¼Œè®©è§†è§‰å¤§å°ä¸åœ†å½¢ä¸€è‡´ */
    width: var(--timeline-star-size);
    height: var(--timeline-star-size);
    /* äº”è§’æ˜Ÿ clip-pathï¼ˆä¸æ”¶è—æŒ‰é’® SVG è·¯å¾„å®Œå…¨ä¸€è‡´ï¼‰*/
    clip-path: polygon(
        50% 8.33%, 
        62.875% 34.42%, 
        91.67% 38.63%, 
        70.83% 58.92%, 
        75.75% 87.58%, 
        50% 74.04%, 
        24.25% 87.58%, 
        29.17% 58.92%, 
        8.33% 38.63%, 
        37.125% 34.42%
    );
}

/* âœ… å·²æ”¶è—ä¸”æ¿€æ´»çŠ¶æ€ï¼šä½¿ç”¨ ::before ç»˜åˆ¶äº”è§’æ˜Ÿè¾¹æ¡† */
.timeline-dot.starred.active::before {
    content: '';
    position: absolute;
    left: 50%;
    top: 50%;
    /* è¾¹æ¡†å±‚ï¼šæ¯”äº”è§’æ˜Ÿä¸»ä½“å¤§ 10px (ä¸¤ä¾§å„ 5px) */
    width: calc(var(--timeline-star-size) + 2 * var(--timeline-star-ring));
    height: calc(var(--timeline-star-size) + 2 * var(--timeline-star-ring));
    transform: translate(-50%, -50%);
    background-color: var(--timeline-dot-active-color); /* ç´«è‰²è¾¹æ¡† */
    /* äº”è§’æ˜Ÿå½¢çŠ¶ï¼ˆä¸æ”¶è—æŒ‰é’® SVG è·¯å¾„å®Œå…¨ä¸€è‡´ï¼‰*/
    clip-path: polygon(
        50% 8.33%, 
        62.875% 34.42%, 
        91.67% 38.63%, 
        70.83% 58.92%, 
        75.75% 87.58%, 
        50% 74.04%, 
        24.25% 87.58%, 
        29.17% 58.92%, 
        8.33% 38.63%, 
        37.125% 34.42%
    );
    z-index: -1; /* åœ¨ ::after ä¸‹æ–¹ */
    /* æ·»åŠ æ¨¡ç³Šå…‰æ™• */
    filter: drop-shadow(0 0 6px var(--timeline-dot-active-color));
    /* æ·»åŠ ç¼©æ”¾è¿‡æ¸¡æ•ˆæœ */
    transition: transform 0.15s ease;
}

/* âœ…âœ… æ·±è‰²ä¸»é¢˜ä¸‹æ”¶è—+æ¿€æ´»çŠ¶æ€çš„å…‰æ™•æ›´å¼º */
html.dark .timeline-dot.starred.active::before {
    filter: drop-shadow(0 0 10px var(--timeline-dot-active-color));
}

/* âœ… hover ç¼©æ”¾æ•ˆæœï¼šè®©è¾¹æ¡†å±‚ä¹Ÿè·Ÿç€ç¼©æ”¾ */
.timeline-dot.starred.active:hover::before {
    transform: translate(-50%, -50%) scale(1.15);
}

/* ============================================
   âœ… æ ‡è®°ï¼ˆPinï¼‰åŠŸèƒ½æ ·å¼ - JS æ·»åŠ å›¾é’‰å…ƒç´ 
   ============================================ */

/* å›¾é’‰å›¾æ ‡ï¼ˆç‹¬ç«‹æ¸²æŸ“åˆ° .chat-timeline-barï¼Œä½¿ç”¨å’ŒèŠ‚ç‚¹ç›¸åŒçš„å®šä½æ–¹å¼ï¼‰ */
.timeline-pin-marker {
    position: absolute !important;
    left: calc(100% + 3px) !important; /* æ—¶é—´è½´å®¹å™¨å³ä¾§3px */
    /* ä½¿ç”¨å’ŒèŠ‚ç‚¹ç›¸åŒçš„ --n å˜é‡å®šä½ */
    top: calc(16px + (100% - 32px) * var(--n, 0)) !important;
    transform: translateY(-50%) !important;
    font-size: 15px !important;
    line-height: 1 !important;
    pointer-events: none !important;
    z-index: 10 !important;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2)) !important;
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
}

/* Floating tooltip element */
.timeline-tooltip {
    position: fixed;
    /* âœ… éœ€æ±‚1ï¼šmax-width åœ¨ JS ä¸­åŠ¨æ€è®¾ç½®ï¼Œè¿™é‡Œåªè®¾ç½®é»˜è®¤å€¼ */
    max-width: var(--timeline-tooltip-max);
    /* âœ… éœ€æ±‚1ï¼šå…è®¸å®½åº¦è‡ªåŠ¨é€‚åº”å†…å®¹ï¼ˆæ–‡å­—å°‘æ—¶è‡ªåŠ¨æ”¶ç¼©ï¼‰*/
    width: auto;
    min-width: 80px; /* è®¾ç½®æœ€å°å®½åº¦ï¼Œé¿å…å¤ªçª„ */
    
    /* âœ… ä¿®æ”¹ï¼šä½¿ç”¨ flexbox æ°´å¹³å¸ƒå±€ï¼Œå‚ç›´å±…ä¸­ */
    display: flex;
    align-items: center;
    gap: 12px; /* å†…å®¹å’Œæ˜Ÿæ ‡ä¹‹é—´çš„é—´è· */
    
    background-color: var(--timeline-tooltip-bg);
    color: var(--timeline-tooltip-text);
    /* âœ… ä¿®æ”¹ï¼šè¿›ä¸€æ­¥å¢åŠ  paddingï¼Œè®©å†…å®¹åŒºåŸŸæ›´å®½æ¾ */
    padding: 14px 18px;
    border-radius: var(--timeline-tooltip-radius);
    border: var(--timeline-tooltip-border-w) solid var(--timeline-tooltip-border);
    font-size: 14px;
    font-weight: 500;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    box-shadow: var(--timeline-tooltip-shadow);
    /* âœ… éœ€æ±‚2ï¼šå…è®¸é¼ æ ‡æ‚¬åœåœ¨ tooltip ä¸Šï¼ˆå¯ä»¥é€‰æ‹©/å¤åˆ¶æ–‡å­—ï¼‰*/
    pointer-events: auto;
    cursor: text; /* æç¤ºç”¨æˆ·å¯ä»¥é€‰æ‹©æ–‡å­— */
    z-index: 2147483648;  /* é«˜äºæ”¶è—é¢æ¿ */
    /* âœ… ä¿®å¤ç®­å¤´æ˜¾ç¤ºï¼šä½¿ç”¨ overflow: visible è®©ç®­å¤´å¯è§ */
    overflow: visible;
    /* Animation base */
    opacity: 0;
    will-change: opacity, transform;
    transition: opacity var(--timeline-tooltip-anim-in);
}

/* âœ… ä¿®æ”¹ï¼šåˆ é™¤äº† header å’Œ index ç›¸å…³æ ·å¼ï¼Œå› ä¸ºæ–°è®¾è®¡ä¸­ä¸å†éœ€è¦ */

/* âœ… æ˜Ÿæ ‡å›¾æ ‡æ ·å¼ï¼ˆä½¿ç”¨ SVG ç»˜åˆ¶äº”è§’æ˜Ÿï¼‰ */
.timeline-tooltip-star {
    width: 18px; /* æ˜Ÿæ ‡å®½åº¦ */
    height: 18px; /* æ˜Ÿæ ‡é«˜åº¦ */
    flex-shrink: 0; /* ä¸å…è®¸æ”¶ç¼©ï¼Œä¿æŒå›ºå®šå¤§å° */
    cursor: pointer;
    user-select: none;
    position: relative;
    transition: none;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
}

/* æœªæ”¶è—çŠ¶æ€ - ç©ºå¿ƒäº”è§’æ˜Ÿï¼ˆæµ…è‰²tooltipä¸»é¢˜ï¼šç™½è‰²è¾¹æ¡†ï¼‰ */
.timeline-tooltip-star.not-starred {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="-1 -1 26 26"><path fill="none" stroke="%23ffffff" stroke-width="1.5" d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>');
}

/* æœªæ”¶è—çŠ¶æ€ - æ·±è‰²tooltipä¸»é¢˜ï¼ˆç™½è‰²èƒŒæ™¯ï¼‰ï¼šæ·±ç°è‰²è¾¹æ¡† */
[data-tooltip-theme="dark"] .timeline-tooltip-star.not-starred {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="-1 -1 26 26"><path fill="none" stroke="%231f2937" stroke-width="1.5" d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>');
}

/* æ”¶è—çŠ¶æ€ - å®å¿ƒäº”è§’æ˜Ÿï¼ˆæ©™è‰²å¡«å…… rgb(255, 125, 3)ï¼‰ */
.timeline-tooltip-star:not(.not-starred) {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="-1 -1 26 26"><path fill="rgb(255, 125, 3)" stroke="rgb(255, 125, 3)" stroke-width="0.5" d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>');
}

/* âœ… é‡æ–°è®¾è®¡ï¼šTooltip å†…å®¹åŒºåŸŸï¼ˆç®€åŒ–ï¼Œä¸ä¾èµ– -webkit-line-clampï¼‰ */
.timeline-tooltip-content {
    flex: 0 1 auto; /* è‡ªé€‚åº”å†…å®¹å®½åº¦ï¼Œä¸å æ®å‰©ä½™ç©ºé—´ */
    line-height: var(--timeline-tooltip-lh);
    
    /* âœ… å…³é”®ï¼šJS å·²ç»ç²¾ç¡®æˆªæ–­äº†æ–‡æœ¬ï¼Œè¿™é‡Œåªéœ€è¦éšè—æº¢å‡ºå³å¯ */
    overflow: hidden;
    word-break: break-word;
    white-space: pre-wrap; /* ä¿ç•™æ¢è¡Œå’Œç©ºæ ¼ */
    
    /* âœ… ç‚¹å‡»å¤åˆ¶åŠŸèƒ½ */
    cursor: pointer; /* é¼ æ ‡å˜æˆæ‰‹çŠ¶ */
    user-select: none; /* ç¦æ­¢é€‰ä¸­æ–‡å­—ï¼ˆå› ä¸ºç‚¹å‡»æ˜¯å¤åˆ¶ï¼‰ */
    transition: opacity 0.15s ease;
    position: relative;
}

.timeline-tooltip-content:hover {
    opacity: 0.8; /* hoveræ—¶ç•¥å¾®å˜æ·¡ï¼Œæç¤ºå¯ç‚¹å‡» */
}

.timeline-tooltip-content:active {
    opacity: 0.6; /* ç‚¹å‡»æ—¶æ›´æ˜æ˜¾çš„åé¦ˆ */
}

/* âœ… å¤åˆ¶æˆåŠŸæç¤º - ä¸ tooltip ä¿æŒä¸€è‡´çš„æ ·å¼ */
.timeline-copy-feedback {
    position: fixed;
    background-color: #ffffff; /* âœ… ç™½è‰²èƒŒæ™¯ */
    color: #1f2937; /* âœ… æ·±ç°è‰²æ–‡å­— */
    padding: 8px 12px;
    border-radius: var(--timeline-tooltip-radius);
    border: 1px solid #e5e7eb; /* âœ… æµ…ç°è‰²è¾¹æ¡† */
    font-size: 13px;
    font-weight: 500;
    box-shadow: 0 4px 14px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06); /* âœ… æŸ”å’Œé˜´å½± */
    z-index: 2147483647;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.15s ease;
}

/* âœ… æ·±è‰²ä¸»é¢˜ä¸‹çš„"å·²å¤åˆ¶"toast */
html.dark .timeline-copy-feedback {
    background-color: #ffffff;
    color: #1f2937;
    border-color: #d1d5db;
}

.timeline-copy-feedback.visible {
    opacity: 1;
}

/* âœ… é”™è¯¯æç¤º toast */
.timeline-error-toast {
    position: fixed;
    background-color: #ef4444;
    color: #ffffff;
    padding: 10px 16px;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 500;
    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
    z-index: 2147483649;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.15s ease;
}

.timeline-error-toast.visible {
    opacity: 1;
}

/* Visible state toggled by JS */
.timeline-tooltip.visible {
    opacity: 1;
    animation: timeline-tooltip-in var(--timeline-tooltip-anim-in);
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .timeline-tooltip,
  .timeline-tooltip.visible {
    transition: opacity 120ms linear;
    transform: none !important;
  }
}

/* Placement-aware transform origin for subtle scale */
.timeline-tooltip[data-placement="left"] { transform-origin: right center; }
.timeline-tooltip[data-placement="right"] { transform-origin: left center; }

@keyframes timeline-tooltip-in {
  from { transform: scale(0.96); }
  to { transform: scale(1); }
}


/* Hide native scrollbar of the track */
.timeline-track::-webkit-scrollbar { width: 0; height: 0; }
.timeline-track { scrollbar-width: none; }

/* Left-side slider to control timeline scroll (visual, low-key) */
.timeline-slider {
    position: absolute;
    left: 2px;
    top: var(--timeline-track-padding);
    bottom: var(--timeline-track-padding);
    width: 6px;
    pointer-events: auto; /* allow handle to capture */
    opacity: 0;
    transition: opacity 180ms ease;
    z-index: 10;
}
.timeline-slider.visible { opacity: 1; }
.timeline-slider::before {
    content: '';
    position: absolute;
    left: 2px;
    top: 0; bottom: 0;
    width: 2px;
    background: rgba(0,0,0,0.08);
    border-radius: 9999px;
}
html.dark .timeline-slider::before { background: rgba(255,255,255,0.10); }

.timeline-slider .timeline-handle {
    position: absolute;
    left: 0;
    width: 6px;
    height: 24px; /* updated by JS */
    background: rgba(16,163,127,0.28); /* chat green with low opacity */
    border-radius: 9999px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.15);
    pointer-events: auto;
    cursor: grab;
    transition: background-color 120ms ease, opacity 120ms ease;
}
.timeline-slider .timeline-handle:hover { background: rgba(16,163,127,0.45); }
.timeline-slider .timeline-handle:active { cursor: grabbing; }
/* External left-side slider (outside the timeline bar) */
.timeline-left-slider {
    position: fixed;
    /* left set by JS using bar's rect (to the left of the bar) */
    top: 0; /* updated by JS */
    width: 12px; /* hit area; visual line narrower */
    height: 160px; /* updated by JS */
    opacity: 0;
    transition: opacity 180ms ease;
    z-index: 30; /* align with bar */
    pointer-events: none;
}
.timeline-left-slider.visible { opacity: 1;  pointer-events: auto; }
.timeline-left-slider::before {
    content: '';
    position: absolute;
    left: 5px; /* center thin track inside 12px hit area */
    top: 0; bottom: 0;
    width: 2px;
    background: rgba(0,0,0,0.08);
    border-radius: 9999px;
}
html.dark .timeline-left-slider::before { background: rgba(255,255,255,0.10); }
.timeline-left-slider .timeline-left-handle {
    position: absolute;
    left: 2px; /* centered for 8px width inside 12px hit area */
    width: 8px;
    height: 22px; /* fixed, concise */
    background: rgba(16,163,127,0.28);
    border-radius: 9999px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.15);
    pointer-events: auto;
    cursor: grab;
    transition: background-color 120ms ease;
}
.timeline-left-slider .timeline-left-handle:hover { background: rgba(16,163,127,0.45); }
.timeline-left-slider .timeline-left-handle:active { cursor: grabbing; }

/* âœ… æ”¶è—æŒ‰é’®ï¼ˆçº¯äº”è§’æ˜Ÿï¼Œtimeline-bar ä¸‹æ–¹ 10pxï¼Œä½ç½®ç”± JS åŠ¨æ€è®¾ç½®ï¼‰ */
.timeline-starred-btn {
    position: fixed;
    /* right å’Œ bottom å€¼ç”± JS æ ¹æ® timeline-bar åŠ¨æ€è®¡ç®—ï¼Œä¿è¯å‚ç›´å±…ä¸­å¯¹é½ */
    width: 28px;
    height: 28px;
    border: none;
    background: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 3px;
    transition: background-color 0.2s ease, opacity 0.2s ease;
    z-index: 30; /* ä¸ timeline-bar åŒçº§ */
    opacity: 0.85;
    border-radius: 6px;
}

.timeline-starred-btn svg {
    width: 22px;
    height: 22px;
}

.timeline-starred-btn:hover {
    opacity: 1;
    background-color: rgba(0, 0, 0, 0.08);
}

.timeline-starred-btn:active {
    opacity: 0.7;
    background-color: rgba(0, 0, 0, 0.12);
}


/* âœ… ä¸»é¢˜è¾“å…¥å¯¹è¯æ¡†é®ç½© */
.timeline-theme-dialog-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 2147483648; /* é«˜äºæ”¶è—é¢æ¿ */
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(4px);
    opacity: 0;
    transition: opacity 0.2s ease;
}

.timeline-theme-dialog-overlay.visible {
    opacity: 1;
}

/* âœ… ä¸»é¢˜è¾“å…¥å¯¹è¯æ¡† */
.timeline-theme-dialog {
    background: #ffffff;
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    width: 90%;
    max-width: 400px;
    animation: dialogSlideIn 0.3s ease;
}

html.dark .timeline-theme-dialog {
    background: #2a2a2a;
}

@keyframes dialogSlideIn {
    from { opacity: 0; transform: translateY(-20px) scale(0.95); }
    to { opacity: 1; transform: translateY(0) scale(1); }
}

/* âœ… å¯¹è¯æ¡†å¤´éƒ¨ */
.timeline-theme-dialog-header {
    padding: 20px 24px 16px;
    border-bottom: 1px solid #e5e7eb;
}

html.dark .timeline-theme-dialog-header {
    border-bottom-color: #404040;
}

.timeline-theme-dialog-header h3 {
    margin: 0;
    font-size: 18px;
    font-weight: 600;
    color: #1f2937;
}

html.dark .timeline-theme-dialog-header h3 {
    color: #f3f4f6;
}

/* âœ… å¯¹è¯æ¡†ä¸»ä½“ */
.timeline-theme-dialog-body {
    padding: 20px 24px;
}

/* âœ… è¾“å…¥æ¡† */
.timeline-theme-input {
    width: 100%;
    padding: 10px 14px;
    font-size: 14px;
    border: 1px solid #d1d5db;
    border-radius: 8px;
    outline: none;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
    font-family: inherit;
    color: #1f2937;
    background: #ffffff;
    box-sizing: border-box;
}

html.dark .timeline-theme-input {
    background: #1f1f1f;
    border-color: #404040;
    color: #f3f4f6;
}

.timeline-theme-input:focus {
    border-color: #000000;
    box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.1);
}

.timeline-theme-input::placeholder {
    color: #9ca3af;
}

/* âœ… å¯¹è¯æ¡†åº•éƒ¨ */
.timeline-theme-dialog-footer {
    padding: 16px 24px 20px;
    display: flex;
    justify-content: flex-end;
    gap: 12px;
    border-top: 1px solid #e5e7eb;
}

html.dark .timeline-theme-dialog-footer {
    border-top-color: #404040;
}

/* âœ… æŒ‰é’®é€šç”¨æ ·å¼ */
.timeline-theme-dialog-cancel,
.timeline-theme-dialog-confirm {
    padding: 8px 16px;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    border: none;
    outline: none;
}

/* âœ… å–æ¶ˆæŒ‰é’® */
.timeline-theme-dialog-cancel {
    background: #f3f4f6;
    color: #374151;
}

html.dark .timeline-theme-dialog-cancel {
    background: #404040;
    color: #d1d5db;
}

.timeline-theme-dialog-cancel:hover {
    background: #e5e7eb;
}

html.dark .timeline-theme-dialog-cancel:hover {
    background: #4b5563;
}

/* âœ… ç¡®å®šæŒ‰é’® */
.timeline-theme-dialog-confirm {
    background: #000000;
    color: #ffffff;
}

html.dark .timeline-theme-dialog-confirm {
    background: #ffffff;
    color: #000000;
}

.timeline-theme-dialog-confirm:hover {
    background: #1f1f1f;
}

html.dark .timeline-theme-dialog-confirm:hover {
    background: #e5e7eb;
}

.timeline-theme-dialog-confirm:active {
    transform: scale(0.95);
}

/* âœ… æ”¶è—é¢æ¿é®ç½© */
.timeline-starred-panel {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 2147483647; /* æœ€é«˜å±‚ï¼Œä¸ tooltip åŒçº§ï¼Œç¡®ä¿è¦†ç›–æ‰€æœ‰å…ƒç´  */
    display: none;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(4px);
}

.timeline-starred-panel.visible {
    display: flex;
}

/* âœ… æ”¶è—é¢æ¿å†…å®¹å®¹å™¨ */
.timeline-starred-content {
    background: #ffffff;
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    width: 90%;
    max-width: 700px;
    max-height: 80vh;
    display: flex;
    flex-direction: column;
    animation: panelSlideIn 0.3s ease;
}

html.dark .timeline-starred-content {
    background: #2a2a2a;
}

@keyframes panelSlideIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* âœ… é¢æ¿å¤´éƒ¨ */
.timeline-starred-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px 24px;
    border-bottom: 1px solid #e5e7eb;
}

html.dark .timeline-starred-header {
    border-bottom-color: #404040;
}

.timeline-starred-header h3 {
    margin: 0;
    font-size: 20px;
    font-weight: 600;
    color: #111827;
}

html.dark .timeline-starred-header h3 {
    color: #f3f4f6;
}

.timeline-starred-close {
    width: 32px;
    height: 32px;
    border: none;
    background: transparent;
    border-radius: 50%;
    font-size: 24px;
    line-height: 1;
    color: #6b7280;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.timeline-starred-close:hover {
    background-color: #f3f4f6;
    color: #111827;
}

html.dark .timeline-starred-close:hover {
    background-color: #404040;
    color: #f3f4f6;
}

/* âœ… æ”¶è—åˆ—è¡¨ */
.timeline-starred-list {
    overflow-y: auto;
    padding: 24px;
    flex: 1;
}

.timeline-starred-empty {
    text-align: center;
    padding: 60px 20px;
    color: #9ca3af;
    font-size: 14px;
}

/* âœ… æ”¶è—é¡¹ */
/* âœ… æ”¶è—é¡¹ - ä¸€è¡Œå¸ƒå±€ */
.timeline-starred-item {
    background: #f9fafb;
    border-radius: 8px;
    padding: 10px 16px;
    margin-bottom: 8px;
    transition: all 0.2s ease;
    border: 1px solid #e5e7eb; /* âœ… æ·¡ç°è‰²è¾¹æ¡† */
    display: flex;
    align-items: center;
    gap: 12px;
}

html.dark .timeline-starred-item {
    background: #1f1f1f;
    border-color: #333333; /* âœ… æš—è‰²æ¨¡å¼ä¸‹çš„æ·¡è‰²è¾¹æ¡† */
}

.timeline-starred-item:hover {
    background: #f3f4f6;
    box-shadow: 0 2px 8px rgba(255, 125, 3, 0.1);
}

html.dark .timeline-starred-item:hover {
    background: #2a2a2a;
}

/* âœ… ç½‘ç«™æ ‡ç­¾ - å›ºå®šå®½åº¦ï¼Œé¢œè‰²ç”±å†…è”æ ·å¼åŠ¨æ€è®¾ç½® */
.timeline-starred-item-tag {
    flex-shrink: 0;
    padding: 3px 10px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 500;
    line-height: 1;  /* âœ… æœ€å°è¡Œé«˜ï¼Œç¡®ä¿å‚ç›´å±…ä¸­ */
    display: flex;
    align-items: center;
    justify-content: center;
    /* é¢œè‰²ç”± JavaScript åŠ¨æ€è®¾ç½® */
}

/* âœ… ç½‘ç«™ logo å›¾ç‰‡ï¼ˆç›´æ¥æ˜¾ç¤ºï¼Œæ— å®¹å™¨ï¼‰ */
.timeline-starred-item-logo {
    flex-shrink: 0;
    height: 20px;
    width: auto;
    max-width: 80px;
    object-fit: contain;
    display: block;
}

/* âœ… æ”¶è—é¡¹å›¾æ ‡ - ç”¨äºæ˜¾ç¤º #åºå· æˆ– ğŸ’¬ å›¾æ ‡ */
.timeline-starred-item-icon {
    flex-shrink: 0;
    font-size: 14px;
    font-weight: 600;
    line-height: 1;  /* âœ… æœ€å°è¡Œé«˜ï¼Œç¡®ä¿å‚ç›´å±…ä¸­ */
    color: #6b7280;
    min-width: 60px;
}

html.dark .timeline-starred-item-icon {
    color: #9ca3af;
}

/* âœ… é—®é¢˜æ–‡æœ¬å®¹å™¨ - å æ®å‰©ä½™ç©ºé—´ï¼Œè®©æ“ä½œæŒ‰é’®é å³ */
.timeline-starred-item-question {
    flex: 1;  /* å æ®å‰©ä½™ç©ºé—´ï¼Œæ“ä½œæŒ‰é’®è‡ªç„¶é å³ */
    min-width: 0;  /* å…è®¸æ”¶ç¼© */
    overflow: hidden;
    position: relative;
    display: flex;  /* âœ… ä½¿ç”¨flexç¡®ä¿å†…å®¹å‚ç›´å±…ä¸­ */
    align-items: center;  /* âœ… å‚ç›´å±…ä¸­ */
}

/* âœ… é—®é¢˜æ–‡æœ¬å†…å®¹ - å®é™…çš„æ–‡å­—spanï¼Œtooltipä¼šç»‘å®šåˆ°è¿™é‡Œ */
.timeline-starred-item-question-text {
    display: inline-block; /* âœ… è®©spanå®½åº¦ç­‰äºæ–‡å­—å®½åº¦ï¼Œè€Œä¸æ˜¯æ•´ä¸ªå®¹å™¨å®½åº¦ */
    max-width: 100%; /* âœ… ä½†ä¸èƒ½è¶…è¿‡å®¹å™¨å®½åº¦ */
    font-size: 14px;
    line-height: 1;  /* âœ… æœ€å°è¡Œé«˜ï¼Œé…åˆçˆ¶å®¹å™¨çš„ flex align-items: center å®ç°å®Œç¾å‚ç›´å±…ä¸­ */
    color: #374151;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    cursor: pointer; /* âœ… å¯ç‚¹å‡»å‰å¾€ */
    user-select: none; /* âœ… ç¦æ­¢é€‰ä¸­æ–‡å­— */
    transition: opacity 0.15s ease;
}

html.dark .timeline-starred-item-question-text {
    color: #d1d5db;
}

/* âœ… é—®é¢˜æ–‡æœ¬æ‚¬åœæ•ˆæœ */
.timeline-starred-item-question-text:hover {
    color: var(--timeline-star-color);
    opacity: 0.8; /* âœ… hoveræ—¶ç•¥å¾®å˜æ·¡ï¼Œæç¤ºå¯ç‚¹å‡»å‰å¾€ */
}

/* âœ… é—®é¢˜æ–‡æœ¬ç‚¹å‡»æ•ˆæœ */
.timeline-starred-item-question-text:active {
    opacity: 0.6; /* âœ… ç‚¹å‡»å‰å¾€æ—¶çš„åé¦ˆ */
}

/* âœ… æ“ä½œæŒ‰é’®å®¹å™¨ - æ”¶è—iconå’Œå‰å¾€æŒ‰é’®çš„å®¹å™¨ */
.timeline-starred-item-actions {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    gap: 6px; /* æ”¶è—iconå’Œå‰å¾€æŒ‰é’®ä¹‹é—´çš„é—´è·ï¼Œæ¯”æ•´ä½“çš„12pxæ›´å° */
}

/* âœ… æ”¶è—åˆ—è¡¨åº•éƒ¨æè¿°åŒºåŸŸ */
.timeline-starred-footer {
    padding: 16px 24px;
    border-top: 1px solid #e5e7eb;
    background: #f9fafb;
    border-radius: 0 0 12px 12px;
}

html.dark .timeline-starred-footer {
    border-top-color: #404040;
    background: #1a1a1a;
}

.timeline-starred-footer-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    line-height: 1.6;
    color: #6b7280;
    margin-bottom: 8px;
}

.timeline-starred-footer-item:last-child {
    margin-bottom: 0;
}

html.dark .timeline-starred-footer-item {
    color: #9ca3af;
}

.timeline-starred-footer-item svg {
    flex-shrink: 0;
    opacity: 0.7;
}

.timeline-starred-footer-item span {
    flex-shrink: 0;
}

.timeline-github-link {
    color: var(--timeline-star-color);
    text-decoration: none;
    font-weight: 500;
    transition: opacity 0.2s ease;
}

.timeline-github-link:hover {
    opacity: 0.8;
    text-decoration: underline;
}

/* ============================================
   âœ… é€šç”¨ Tooltip æ ·å¼ï¼ˆåŸºç¡€ç±»ï¼‰
   ============================================ */

/* âœ… é€šç”¨ tooltip åŸºç¡€æ ·å¼ */
.timeline-tooltip-base {
    position: fixed;
    border-radius: 8px;
    padding: 8px 12px;
    font-size: 13px;
    font-weight: 500;
    line-height: 1.5;
    white-space: normal;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    word-break: break-word;
    max-width: 400px;
    z-index: 2147483648;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.15s ease, visibility 0.15s ease;
    pointer-events: none;
}

.timeline-tooltip-base.visible {
    opacity: 1;
    visibility: visible;
}

/* âœ… é»‘è‰²èƒŒæ™¯ tooltipï¼ˆç”¨äºé™çº§é€»è¾‘ï¼‰ */
.timeline-tooltip-dark {
    background-color: var(--timeline-tooltip-bg);
    color: var(--timeline-tooltip-text);
    border: 1px solid var(--timeline-tooltip-border);
}

/* âœ… ç™½è‰²èƒŒæ™¯ tooltipï¼ˆç”¨äºé™çº§é€»è¾‘ï¼‰ */
.timeline-tooltip-light {
    background-color: #ffffff;
    color: #000000;
    border: 1px solid rgba(0, 0, 0, 0.1);
}

/* ============================================
   âœ… ç»Ÿä¸€çš„Tooltipç®­å¤´æ ·å¼ï¼ˆæ‰€æœ‰tooltipå…±ç”¨ï¼‰
   ============================================ */

/* ç®­å¤´åŸºç¡€æ ·å¼ */
.timeline-tooltip::after,
.timeline-tooltip-base::after {
    content: '';
    position: absolute;
    width: 8px;
    height: 8px;
    transform: rotate(45deg);
    /* ä½¿ç”¨CSSå˜é‡è®¾ç½®ç®­å¤´é¢œè‰²ï¼ˆæ”¯æŒåŠ¨æ€åˆ‡æ¢ï¼‰ */
    background: var(--timeline-tooltip-bg);
    border: 1px solid var(--timeline-tooltip-border);
    z-index: 1;
}

/* æ˜¾ç¤ºåœ¨ä¸Šæ–¹æ—¶ï¼Œç®­å¤´åœ¨åº•éƒ¨æŒ‡å‘ä¸‹æ–¹ */
.timeline-tooltip[data-placement="top"]::after,
.timeline-tooltip-base[data-placement="top"]::after {
    bottom: -4px;
    left: 50%;
    margin-left: -4px;
    border-top: none;
    border-left: none;
    box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.05);
}

/* æ˜¾ç¤ºåœ¨ä¸‹æ–¹æ—¶ï¼Œç®­å¤´åœ¨é¡¶éƒ¨æŒ‡å‘ä¸Šæ–¹ */
.timeline-tooltip[data-placement="bottom"]::after,
.timeline-tooltip-base[data-placement="bottom"]::after {
    top: -4px;
    left: 50%;
    margin-left: -4px;
    border-bottom: none;
    border-right: none;
    box-shadow: -2px -2px 2px rgba(0, 0, 0, 0.05);
}

/* æ˜¾ç¤ºåœ¨å·¦ä¾§æ—¶ï¼Œç®­å¤´åœ¨å³è¾¹æŒ‡å‘å³æ–¹ */
.timeline-tooltip[data-placement="left"]::after,
.timeline-tooltip-base[data-placement="left"]::after {
    right: -5px; /* âœ… å‘å³ç§»åŠ¨1pxï¼Œä»-4pxæ”¹ä¸º-5pxï¼Œä¼˜åŒ–è§†è§‰æ•ˆæœ */
    top: 50%;
    margin-top: -4px;
    border-left: none;
    border-bottom: none;
    box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.05);
}

/* æ˜¾ç¤ºåœ¨å³ä¾§æ—¶ï¼Œç®­å¤´åœ¨å·¦è¾¹æŒ‡å‘å·¦æ–¹ */
.timeline-tooltip[data-placement="right"]::after,
.timeline-tooltip-base[data-placement="right"]::after {
    left: -4px;
    top: 50%;
    margin-top: -4px;
    border-right: none;
    border-top: none;
    box-shadow: -2px -2px 2px rgba(0, 0, 0, 0.05);
}

/* âœ… ç¼–è¾‘æŒ‰é’® - ä¸æ˜Ÿæ ‡æŒ‰é’®å°ºå¯¸ä¸€è‡´ */
.timeline-starred-item-edit {
    flex-shrink: 0;
    width: 24px;
    height: 24px;
    border: none;
    background: transparent;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    padding: 0;
}

.timeline-starred-item-edit svg {
    width: 14px;
    height: 14px;
    color: #6b7280;
}

html.dark .timeline-starred-item-edit svg {
    color: #9ca3af;
}

.timeline-starred-item-edit:hover {
    background-color: rgba(0, 0, 0, 0.05);
    transform: scale(1.1);
}

html.dark .timeline-starred-item-edit:hover {
    background-color: rgba(255, 255, 255, 0.1);
}

.timeline-starred-item-edit:hover svg {
    color: #374151;
}

html.dark .timeline-starred-item-edit:hover svg {
    color: #d1d5db;
}

.timeline-starred-item-edit:active {
    transform: scale(0.95);
}

/* âœ… äº”è§’æ˜ŸæŒ‰é’® - å›ºå®šå°ºå¯¸ */
.timeline-starred-item-star {
    flex-shrink: 0;
    width: 24px;
    height: 24px;
    border: none;
    background: transparent;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    padding: 0;
}

.timeline-starred-item-star svg {
    width: 14px;
    height: 14px;
}

.timeline-starred-item-star:hover {
    background-color: rgba(255, 125, 3, 0.1); /* âœ… ä¿æŒ rgba æ ¼å¼ç”¨äºé€æ˜åº¦ */
    transform: scale(1.1);
}

.timeline-starred-item-star:active {
    transform: scale(0.95);
}

/* âœ… å¤åˆ¶æŒ‰é’® - ä¸ç¼–è¾‘æŒ‰é’®å°ºå¯¸ä¸€è‡´ */
.timeline-starred-item-copy {
    flex-shrink: 0;
    width: 24px;
    height: 24px;
    border: none;
    background: transparent;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    padding: 0;
}

.timeline-starred-item-copy svg {
    width: 14px;
    height: 14px;
    color: #6b7280;
}

html.dark .timeline-starred-item-copy svg {
    color: #9ca3af;
}

.timeline-starred-item-copy:hover {
    background-color: rgba(0, 0, 0, 0.05);
    transform: scale(1.1);
}

html.dark .timeline-starred-item-copy:hover {
    background-color: rgba(255, 255, 255, 0.1);
}

.timeline-starred-item-copy:hover svg {
    color: #374151;
}

html.dark .timeline-starred-item-copy:hover svg {
    color: #d1d5db;
}

.timeline-starred-item-copy:active {
    transform: scale(0.95);
}

/* ============================================
   âœ… å…¬å¼äº¤äº’æ ·å¼ï¼ˆFormulaManagerï¼‰
   ============================================ */

/* å…¬å¼åŸºç¡€äº¤äº’æ ·å¼ï¼ˆç»Ÿä¸€è¯†åˆ« .katex å…ƒç´ ï¼‰*/
.katex.formula-interactive {
    position: relative;
    transition: background-color 0.2s ease, transform 0.15s ease;
    border-radius: 6px;
}

/* å…¬å¼ hover æ•ˆæœ */
.katex.formula-interactive.formula-hover {
    background-color: rgba(0, 0, 0, 0.06) !important;
    cursor: pointer;
}

html.dark .katex.formula-interactive.formula-hover {
    background-color: rgba(255, 255, 255, 0.08) !important;
}

/* å…¬å¼ç‚¹å‡»æ•ˆæœ */
.katex.formula-interactive:active {
    transform: scale(0.998);
}

/* å…¬å¼ tooltipï¼ˆç»§æ‰¿é€šç”¨ tooltip æ ·å¼ï¼‰*/
.formula-tooltip {
    /* åŸºç¡€æ ·å¼å·²åœ¨ .timeline-tooltip-base ä¸­å®šä¹‰ */
    font-size: 13px;
    padding: 8px 14px;
    white-space: nowrap;
}

/* å…¬å¼å¤åˆ¶åé¦ˆæ ·å¼ä¼˜åŒ– */
.timeline-copy-feedback {
    /* åŸºç¡€æ ·å¼å·²å®šä¹‰ï¼Œè¿™é‡Œæ·»åŠ å…¬å¼ç‰¹å®šçš„ä¼˜åŒ– */
    min-width: 80px;
    text-align: center;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
}
